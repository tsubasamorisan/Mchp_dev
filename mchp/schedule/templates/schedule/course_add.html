{% extends 'schedule/base.html' %}

{% block head_title %}Add a Course{% endblock %}

{% block head %}
{% load staticfiles %}
	<link rel="stylesheet" type="text/css" href="{% static 'user_profile/css/form.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'user_profile/css/validator.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'schedule/css/course_add.css' %}">
	<script src="{% static 'user_profile/js/bootstrapValidator.min.js' %}"></script>
	<script src="{% static 'schedule/js/course_add.js' %}"></script>
	<script src="{% static 'lib/js/jquery.cookie.js' %}"></script>
{% endblock %}

{% block body %}
<div class="container">
	<div class="row">
		<div class="col-xs-12">
			<div class="media">
    			<img class="media-object pull-left animated slideInLeft" src="https://s3-us-west-2.amazonaws.com/mchpstatic/Flat+Icon+SVG/SVG/clocks.svg" height="50px" alt="schedule">
  				<div class="media-body">
    			<h2 class="media-heading">Class Schedule <div class='pull-right'> <a href='/classes/' class='btn btn-primary'><i class="fa fa-book fa-fw"></i> Your Classes &raquo;</a> </div></h2>
				Add, Drop, or Create a Class</div>
			</div>
			<hr>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-4">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h2 class="panel-title">Currently Enrolled</h2>
				</div>
				<div class="panel-body">
					<div class="list-group" id="enrolled_list">
						{% if enrolled_courses %}
							{% for course in enrolled_courses %}
							<div class="list-group-item enrolled-class-id" id="enrolled_{{course.pk}}">
								<h4 class="list-group-item-heading">{{course.dept}} {{course.course_number}}
									<small class="pull-right">
										<a href="javascript:void(0)" class="badge" data-course="{{course.pk}}">drop</a>
									</small>
								</h4>
								<p class="list-group-item-text">with Instructor {{course.professor}}</p>
							</div>
							{% endfor %}
							{% else %}
							No classes added to your schedule yet.
						{% endif %}
						</div>
					</div>
				</div>
			</div>

			<div class="col-sm-8">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h2 class="panel-title">Search for a Class</h2>
					</div>
					<div class="panel-body">							
							<form id="class_search_form" class="" method="get" action="{% url 'course_add' %}">
								<div class="input-group">
								<input type="text" class="form-control input-lg" 
								placeholder="Search for a class: PSY 200" name="q">
								<span class="input-group-btn">
									<button class="btn btn-primary btn-lg" type="submit"><i class="fa fa-search"></i> Search</button>
								</span>
								</div>
							</form>
						{% if show_results %}
						<div id="searchResultContainer">
							<hr>
							<h4>Results <small>for "{{ query }}"</small></h4>
							<hr>
							<div class="list-group search-group scrolls" id="searchResults">
								{% if course_results %}
									{% for course in course_results %}
										<div class="list-group-item">
											<h4 class="list-group-item-heading">{{course.dept}} {{course.course_number}}
												<small>with Instructor {{course.professor}}</small> 
												<button class="pull-right btn btnlg btn-success"
													autocomplete="off"
													form="{{course.pk}}_course_add">Join</button>
												<form id="{{course.pk}}_course_add" method="post" action="{% url 'course_add' %} ">
													{% csrf_token %}
													<input type="hidden" name="courses" value="{{course.pk}}" autocomplete="off"/>
												</form>
											</h4>
											<p class="list-group-item-text">
												<i class='fa fa-user fa-fw'></i> 
												{% ifequal course.student_count 1%}
													{{course.student_count}} Student
												{% else %}
													{{course.student_count}} Students
												{% endifequal %}
												<i class='fa fa-file fa-fw'></i> 0 Documents 
												<i class='fa fa-calendar fa-fw'></i> 0 Calendars
											</p>
										</div>
									{% endfor %}
										<div class="list-group-item list-group-item-danger">
											<a href="{% url 'course_create' %}" class="btn btn-danger pull-right">Create Class</a> 
											<h5>Can't find your class?</h5> 
										</div>
								{% else %}
									<div class="list-group-item list-group-item-danger">
											<a href="{% url 'course_create' %}" class="btn btn-danger pull-right">Create Class</a> 
											<h5>No classes matched this search! Create this class to earn points.</h5> 
										</div>
								{% endif %}
							</div>
						</div>
						{% endif %}
					</div>
				</div>
			</div>		
		</div>		
	</div>
</div>
</div>	
{% endblock %}
