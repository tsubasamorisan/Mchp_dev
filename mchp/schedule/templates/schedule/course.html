{% extends 'schedule/base.html' %}

{% block head_title %}Course{% endblock %}

{% block extra_head %}
	{% load staticfiles %}
		<link rel="stylesheet" type="text/css" href="{% static 'schedule/css/course.css' %}">
		<script src="{% static 'schedule/js/course.js' %}"></script>
		<script src="{% static 'schedule/js/course_detail.js' %}"></script>
		<script src="{% static 'lib/js/jquery.cookie.js' %}"></script>
{% endblock %}

{% block body %}
{% load humanize %}
<div class="container animated bounceInUp">
	<ol class="breadcrumb">
		<div class="pull-right">
			<a button type="button" class="btn btn-success btn-xs" href='{% url "document_upload" %}'><i class="fa fa-money fa-fw"></i> Sell Document</a>
			<a class="btn btn-facebook btn-xs"><i class="fa fa-fw fa-facebook"></i> Share</a>
		</div>
		<li><a href="{%url "school" course.domain.pk%}{{course.domain.name}}"><i class="fa fa-university fa-fw"></i> {{course.domain.name}}</a> </li>
		<li class="active"><i class="fa fa-book fa-fw"></i> {{course.display}}</li>
	</ol>
	<div class="well" style="padding-bottom:0px;">
		<div class="panel panel-default">
		<div class="panel-body">
	<div class="media"> <a class="pull-left"> <img class="media-object img-responsive" width="75px" src="https://s3-us-west-2.amazonaws.com/mchpstatic/Flat+Icon+SVG/SVG/book.svg" alt="course"></a>
		<div class="media-body">
			<h2 class="media-heading">{{course.dept}} {{course.course_number}}
				<small> at <a href='{% url "school" course.domain.pk %}{{ course.domain.name}}'>{{course.domain.name}}</a></small>
				<small class="pull-right">
					{% if student and not enrolled %}
					<a id="join-button" href="javascript:void(0)" class="btn btn-success" data-course="{{course.pk}}">Join this class</a>
					{% else %}
					<button class="btn btn-success disabled"><i class="fa fa-check"></i> Enrolled</button>
					{% endif %}
				</small>
			</h2>
			<p class="animated">
				{% with course.student_count as student_count %}
				<i class="fa fa-users"></i> {{student_count}} Student{{student_count|pluralize}} &nbsp;
				{% endwith %}
				{% with course.document_count as doc_count %}
				<i class="fa fa-file"></i> {{doc_count}} Document{{doc_count|pluralize}} &nbsp;
				{% endwith %}
				<i class="fa fa-calendar"></i> 60 Calendars &nbsp;
			</p>
		</div>
		<div class="progress" style="margin-bottom:0px; width:68%;">
			<div class="progress-bar progress-bar-info" style="width: 67%"> <span class="sr-only">67% Complete (info)</span> </div>
			<div class="progress-bar progress-bar-primary" style="width: 11%"> <span class="sr-only">11% Complete (primary)</span> </div>
			<div class="progress-bar progress-bar-warning" style="width: 22%"> <span class="sr-only">22% Complete (warning)</span> </div>
		</div>
	</div>
</div>
	  </div>
</div>
	<div class="row">
		<div class='col-sm-7'>
			<div class="panel panel-default" id="popular-documents">
				<div class="panel-heading clearfix">
					<h3 class="panel-title tour-step-four"> Popular Documents <span
					class="badge">{{popular_documents|length}}</span></h3>
				</div>
				<div class="panel-body">
					<div class="list-group item-list">
						{% for document in popular_documents %}
						<div class="list-group-item">
							<div class="media">
								<span class="pull-left" href="#">
									<div class="media-object img-thumbnail">
										{% if document.preview %}
										<a href="#"><img src="{{document.preview.url}}" style="width:64px"></a>
										{% else %}
										<a href="#"><img src="" style="width:64px"></a>
										{% endif %}
								</div></span>
								<div class="media-body">
									<h4 class="media-heading"><a href="{%url "document_detail" document.uuid %}">{{document.title}}</a>
									<small>{{document.price}} points</small><div class="pull-right small
										text-muted hidden-sm">{{document.create_date|naturaltime}}</div></h4>
									<span class="description">
										<i class="fa fa-fw fa-thumbs-up text-success"></i>{{document.up}} 
										<i class="fa fa-fw fa-thumbs-down text-danger"></i>{{document.down}}&nbsp;
										{% with document.review_count as review_count %}
										<i class="fa fa-comments text-info fa-fw"></i>{{review_count}} Review{{review_count|pluralize}}&nbsp;
										{% endwith %}
										<i class="fa fa-fw fa-money text-success"></i> {{document.sold}}
										Purchase{{document.sold|pluralize}}
										<p class="small" style="margin-top:5px;">Uploaded by <a class="user-popover" href="#"></a> in <a href="{%url "course" document.course.pk%}{{document.course.name}}">{{document.course.dept}} {{document.course.course_number}}</a></p>
									</span>
								</div>
							</div>
						</div>
						{% empty %}
						<div class="list-group">
							<div class="list-group-item">
							    <p class="h5">Be the first to sell a document for this class!</p>
							    <a button type="button" class="btn btn-success" href='{% url "document_upload" %}'><i class="fa fa-money fa-fw"></i> Sell Document</a>
						    </div>					  
						</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
		<div class='col-sm-5'>
			<div class="panel panel-default" id="recent-documents">
				<div class="panel-heading clearfix">
					<h3 class="panel-title tour-step-four"> Popular Calendars <span class="badge">10</span></h3>
				</div>
				<div class="panel-body">
					<div class="list-group item-list"></div>
				</div>
			</div>
		</div>
	</div>
</div><!-- end container -->
{% endblock %}
