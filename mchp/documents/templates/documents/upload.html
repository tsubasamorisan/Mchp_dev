{% extends 'documents/base.html' %}

{% block head_title %}Upload a Document{% endblock %}

{% block extra_head %}

    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static 'documents/css/upload_doc.css' %}">
    <script src="{% static 'documents/js/upload_doc.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'lib/css/bootstrapValidator.css' %}">
    <script src="{% static 'lib/js/bootstrapValidator.min.js' %}"></script>

{% endblock %}

{% block body %}
<div class="loading hidden"><i class="fa fa-spinner fa-spin fa-stack-1x fa-5x"></i></div>
<div class="row">
  <div class="col-xs-12">
    <div class="media">
      <div class="media-left media-middle">
        <span class="media-object pull-left animated" alt="Add Documents">
        <i class="fa fa-file-text-o fa-fw fa-4x"></i></span>
      </div>
      <div class="media-body">
        <h1 class="media-heading">Upload Documents</h1>
        <p class="lead margin-btm-none">Stack some paper (anonymously)</p>
      </div>
    </div>
    <br>
    <hr>
  </div>
  <!-- end col 12 -->
  <div class="col-xs-12">
    <div class="upload-form">
      <form id="upload_form" class="autocomplete" action="{% url 'document_upload' %}" method="post"
            enctype="multipart/form-data">
        {% csrf_token %}
        {% for field in form %}
        {{ field.errors }}
        {% ifequal field.name "course" %}
        <div class="form-group">
          <div class="input-group">
            <span class="input-group-addon">{{ field.label_tag }}</span>
            <li class="dropdown" id="drop-li">
              {{ field }}
              <ul class="dropdown-menu" id="ac-dropdown">
                <li role="presentation" class="dropdown-header">Your Courses</li>
                {% for course in enrolled_courses %}
                  <li data-course="{{ course.pk }}" class="strong"><a href="#"><i
                          class="fa fa-fw fa-plus-circle text-success"></i> {{ course.display }}</a>
                  </li>
                  {% empty %}
                  <li class="strong"><a href="{% url "course_add" %}"><i
                          class="fa fa-fw fa-plus-circle text-danger"></i>Add a course</a></li>
                {% endfor %}
              </ul>
            </li>
          </div>
        </div>
        {% else %}
        {% ifequal field.name "document" %}
        <div class="form-group">
          <div class="input-group">
            <span class="input-group-addon">{{ field.label_tag }}</span>
          	<span class="btn btn-trans btn-lg btn-file">
							Browse <input type="file" id="{{ form.document.id_for_label }}" name="{{ form.document.name }}">
						</span>&nbsp;<span class="selected-file"></span>
          </div>
        </div>
        {% else %}
        <div class="form-group" id="{{ field.name }}_container">
          <div class="input-group">
            <span class="input-group-addon">{{ field.label_tag }}</span>
            {{ field }}
          </div>
        </div>
        {% endifequal %}
        {% endifequal %}
        {% endfor %}
        <input type="hidden" name="course" id="hidden_course"></input>
        <p><input type="submit" value="Upload" class="btn btn-lg btn-trans btn-block"/></p>
      </form>
    </div>
  </div><!-- end col 12 -->
</div><!-- end row -->
<div id="enrolled_courses" data-enrolled_courses="{{ enrolled_courses }}"></div>
    {% endblock %}
