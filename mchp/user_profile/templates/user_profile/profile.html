{% extends 'user_profile/base.html' %}

{% block head_title %}
{% if request.user.is_authenticated %}
{% if user.first_name %}{{user.first_name}}{%else%}{{user.username}}{% endif %}
{% else %}Not Logged In
{% endif %}
{% endblock %}
{% block extra_head %}

<link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>

{% load staticfiles %}
<script src="{% static 'lib/js/jquery.cookie.js' %}"></script>
<!-- <link rel="stylesheet" type="text/css" href="{% static 'documents/css/list.css' %}"> -->
<link rel="stylesheet" type="text/css" href="{% static 'user_profile/css/user_profile.css' %}">
<script src="{% static 'user_profile/js/profile.js' %}"></script>
<!-- // <script src="{% static 'documents/js/list.js' %}"></script> -->

{% endblock %}

{% block body %}
{% load humanize %}
<span class="text-center center-block">
	<img src="{{profile.profile_image_url}}" width="160px" id="profile-image" class=" animated flipInX img-thumbnail img-responsive img-circle delayed-sm">
	{% ifequal viewer student %}
	<div id="update-photo">
	</div>
	<div class="btn-file">
		<span class=""><i class="fa fa-camera"></i> Update <input type="file">
		</div>
		{% endifequal %}

		<h2 style="margin-bottom:;">{{user.first_name}} {{user.last_name}}</h2>
		<p class="small">{{user.username}} &nbsp;
			{% ifequal viewer student %}
			<span id="major" data-type="text" data-title="" data-params=""><i class="fa fa-graduation-cap fa-fw"></i> Add your Major</span> &nbsp;
			{% else %}
			<span id="major-other"><i class="fa fa-graduation-cap fa-fw"></i> Marketing Major</span> &nbsp;
			{% endifequal %}
			<i class="fa fa-university fa-fw"></i>{{student.school.name}}</p>
			<!-- <h5><small style="color:;">joined {{student.create_date | naturaltime}}</small></h5> -->
			<div class="about-container">
				{% ifequal viewer student %}
				<p class="lead" id="about" data-type="text" data-title="" data-params="{csrfmiddlewaretoken:'{{csrf_token}}'}">{{profile.blurb}}</p> <!--<button id="edit-button" class="btn btn-xs">Edit</button>-->
				{% else %}
				<p class="lead" id="about-other">{{profile.blurb}}</p> <!--<button id="edit-button" class="btn btn-xs">Edit</button>-->
				{% endifequal %}
			</div>
		</span>
		<p></p>
		<!-- </div> -->
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-10 col-md-offset-1 ">
					<div class="progress">
						<a href="#" class="progress-bar progress-bar-success" id="score_1">
							<span class="sr-only">35% Complete (success)</span>
						</a>
						<a href="#" class="progress-bar progress-bar-primary" id="score_2">
							<span class="sr-only">20% Complete (warning)</span>
						</a>
						<a href="#" class="progress-bar progress-bar-info" id="score_3" >
							<span class="sr-only">45% Complete (danger)</span>
						</a>
					</div>

					<!-- Nav tabs -->
					<!-- <ul class="nav nav-tabs" role="tablist">
						<li class="active"><a href="#me" role="tab" data-toggle="tab">Me</a></li>
						<li><a href="#selling_docs" role="tab" data-toggle="tab">Documents <span class="badge">{{upload_list|length}}</span></a></li>
						<li><a href="#selling_calendars" role="tab" data-toggle="tab">Calendars <span class="badge">2</span></a></li>
					</ul> -->

					<div class="well">
						<div id="user_classes" class="">
							<div class="panel panel-default text-center">
								<div class="panel-body">
									<div class="page-header">
										<h3 class="text-center">{{user.first_name}}'s Classes</h3>
										<p class="text-center">You have 2 classes in common</p>
									</div>
									<div class="row">
										{% for course in student.courses.all %}
										<div class="col-sm-2 col-centered">
											<p></p>
											<!-- don't include the slug here -->
											<a href="{%url "course" course.pk%}">
												<img src="https://s3-us-west-2.amazonaws.com/mchpstatic/Flat+Icon+SVG/SVG/book.svg" width="75px" alt="classes">
											</a>
											<i class="fa fa-check-circle-o fa-2x class-in-common"></i>
											<div class="caption">
												<h5>{{course.display}}</h5>
												<p class="small"><i class="fa fa-users fa-fw"></i> {{course.student_count}} <i class="fa
													fa-calendar fa-fw"></i> 42 <i class="fa fa-file fa-fw"></i>
													{{course.document_count}}</p>
												</div>
											</div>
											{% endfor %}
										</div>
									</div>
								</div>
							</div>
							<div class="panel panel-default text-center">
								<div class="panel-body">
									<div class="page-header">
										<h3 class="text-center">Documents</h3>
										<p class="text-center"><span class="badge">{{upload_list|length}}</span></p>
									</div>
			
									{% if upload_list %}
									<div class="list-group scrolls" id="document-list">
										{% for document in upload_list %}
										<li class="list-group-item" id="document_{{document.pk}}">

											<div class="media">
												<div class="img-thumbnail pull-left"><a href="{% url 'document_list' %}
													{{ document.uuid}}/
													{{ document.slug}} ">

													{% if document.preview %}
													<img src="{{document.preview.url}}" style="width:64px"></a></div>
													{% else %}
													<img src="{% static 'documents/img/loading_file.svg' %}" style="width:64px"></a></div>
													{% endif %}

													<div class="media-body">
														<h4 class="media-heading"><a href="{% url 'document_list' %}
															{{ document.uuid}}/
															{{ document.slug}}
															">{{ document.title }}</a> <small>{{document.price}} <i class="fa fa-fw fa-cube"></i></small>
															<div class="pull-right small text-muted"></div>
														</h4>
														<span class="description">
															<i class="fa fa-fw fa-thumbs-o-up text-success"></i>{{document.up}}
															<i class="fa fa-fw fa-thumbs-o-down text-danger fa-flip-horizontal"></i>{{ document.down}}&nbsp;&nbsp;
															<i class="fa fa-comments-o text-info fa-fw"></i>&nbsp;{{document.review_count}} Reviews&nbsp;&nbsp;
															<i class="fa fa-fw fa-money text-success"></i>&nbsp;{{document.purchase_count}} Purchases
														</span>
													</div>
												</div>
											</li>
											{% endfor %}
											<div id="no-documents" style="display: none;">
												<p class="lead text-center">{{user.first_name}} isn't selling any documents!</p>
												<hr>
											</div>
											{% else %}
											<div id="no-documents">
												<p class="lead text-center">{{user.first_name}} isn't selling any documents!</p>
												<hr>
											</div>
											{% endif %}
										</div>
									</div>
									<div class="panel panel-default text-center">
										<div class="panel-body">
											<div class="page-header">
										<h3 class="text-center">Calendars</h3>
										<p class="text-center"><span class="badge">{{upload_list|length}}</span></p>
									</div>
											<div id="no-calendars">
												<p class="lead text-center">{{user.first_name}} isn't selling any calendars!</p>
												<hr>
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>
					{% endblock %}
